
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>12. 재귀 1부: 재귀 함수 &#8212; 문제해결 알고리즘</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="13. 재귀 2부: 하노이의 탑과 미로게임" href="recursion_2.html" />
    <link rel="prev" title="11. 기초 추상 자료형 구현 5부: 정렬 리스트" href="ordered_lists.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">문제해결 알고리즘</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="python_basic_1.html">
   1. 파이썬 기초 1부: 자료형
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="python_basic_2.html">
   2. 파이썬 기초 2부: 제어 구조와 함수
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="python_basic_3.html">
   3. 파이썬 기초 3부: 클래스와 상속
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="python_basic_4.html">
   4. 파이썬 기초 4부: 클래스 기본 요소
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="time_complexity.html">
   5. 알고리즘 분석 1부: 시간 복잡도
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="python_list_dict.html">
   6. 알고리즘 분석 2부: 파이썬 모음 자료형 분석
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stacks.html">
   7. 기초 추상 자료형 1부: 스택
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="queues.html">
   8. 기초 추상 자료형 구현 2부: 큐
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deques.html">
   9. 기초 추상 자료형 구현 3부: 덱
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linked_lists.html">
   10. 기초 추상 자료형 구현 4부: 연결 리스트
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ordered_lists.html">
   11. 기초 추상 자료형 구현 5부: 정렬 리스트
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   12. 재귀 1부: 재귀 함수
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="recursion_2.html">
   13. 재귀 2부: 하노이의 탑과 미로게임
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/codingalzi/algopy/master?urlpath=tree/jupyter-book/recursion_1.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/codingalzi/algopy"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/codingalzi/algopy/issues/new?title=Issue%20on%20page%20%2Frecursion_1.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/recursion_1.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   12.1. 5.1 목표
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   12.2. 5.2 재귀 함수
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     12.2.1. 예제: 리스트 항목의 합 구하기
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     12.2.2. 재귀 함수
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   12.3. 5.3 재귀 알고리즘의 특징
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id7">
     12.3.1. 재귀 함수 예제
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#factorial">
       12.3.1.1. 예제 1: 계승(factorial) 함수
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id8">
       12.3.1.2. 예제 2: 진법 변환
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       12.3.1.3. 예제 3: 문자열 뒤집기
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id10">
       12.3.1.4. 예제 4: 회문 판별기
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#call-stack">
   12.4. 5.4 콜 스택(Call Stack)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id11">
   12.5. 5.5 재귀 시각화
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id12">
     12.5.1. 예제: 프랙탈 트리
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id13">
     12.5.2. 꼬리와 재귀 일반화
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sierpinski-triangle">
     12.5.3. 예제: 시에르핀스키 삼각형(Sierpinski Triangle)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id14">
   12.6. 프로그래밍 실습 문제
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>재귀 1부: 재귀 함수</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   12.1. 5.1 목표
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   12.2. 5.2 재귀 함수
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     12.2.1. 예제: 리스트 항목의 합 구하기
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     12.2.2. 재귀 함수
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id6">
   12.3. 5.3 재귀 알고리즘의 특징
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id7">
     12.3.1. 재귀 함수 예제
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#factorial">
       12.3.1.1. 예제 1: 계승(factorial) 함수
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id8">
       12.3.1.2. 예제 2: 진법 변환
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       12.3.1.3. 예제 3: 문자열 뒤집기
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id10">
       12.3.1.4. 예제 4: 회문 판별기
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#call-stack">
   12.4. 5.4 콜 스택(Call Stack)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id11">
   12.5. 5.5 재귀 시각화
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id12">
     12.5.1. 예제: 프랙탈 트리
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id13">
     12.5.2. 꼬리와 재귀 일반화
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sierpinski-triangle">
     12.5.3. 예제: 시에르핀스키 삼각형(Sierpinski Triangle)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id14">
   12.6. 프로그래밍 실습 문제
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1><span class="section-number">12. </span>재귀 1부: 재귀 함수<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h1>
<p>Copyright (C)  Brad Miller, David Ranum.
This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy of this license, visit <a class="reference external" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">http://creativecommons.org/licenses/by-nc-sa/4.0/</a>.</p>
<section id="id2">
<h2><span class="section-number">12.1. </span>5.1 목표<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>재귀 함수 정의와 구현</p></li>
<li><p>재귀 함수 활용</p></li>
</ul>
</section>
<section id="id3">
<h2><span class="section-number">12.2. </span>5.2 재귀 함수<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h2>
<p><strong>재귀</strong>(recursion) 주어진 문제를 해결하기 위해 보다 작은 문제로 반복적으로 쪼개서 해결하는 문제 해결 기법이다. 재귀를 사용하지 않고 해결하려 할 때 매우 어려운 문제가 재귀를 이용하여 간단하게 해결되는 경우가 많다.</p>
<section id="id4">
<h3><span class="section-number">12.2.1. </span>예제: 리스트 항목의 합 구하기<a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h3>
<p>리스트 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">3,</span> <span class="pre">5,</span> <span class="pre">7,</span> <span class="pre">9]</span></code>에 포함된 수들의 합을 구해보자.
먼저, <code class="docutils literal notranslate"><span class="pre">for</span></code> 반복문을 이용하면 다음과 같다.</p>
<ul class="simple">
<li><p>합을 0으로 시작.</p></li>
<li><p>각 항목을 확인하여 합에 더하기</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="n">the_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">:</span>
        <span class="n">the_sum</span> <span class="o">=</span> <span class="n">the_sum</span> <span class="o">+</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">the_sum</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">list_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25
</pre></div>
</div>
</div>
</div>
<p>위 코드의 <code class="docutils literal notranslate"><span class="pre">for</span></code> 반복문에서 항목을 확인할 때마다 업데이트되는
<code class="docutils literal notranslate"><span class="pre">the_sum</span></code> 변수는 아래 괄호가 묶인 순서대로 계산되는 값을 차례대로 가리킨다.</p>
<div class="math notranslate nohighlight">
\[(((1 + 3) + 5) + 7) + 9\]</div>
<p>그런데 이 경우 재귀를 이용하려면 아래와 같이 작동하는 항목의 합을 사용해야 한다.</p>
<div class="math notranslate nohighlight">
\[1 + (3 + (5 + (7 + 9)))\]</div>
<p>위 방식을 <code class="docutils literal notranslate"><span class="pre">for</span></code> 반복문으로 구현하면 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="n">the_sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num_list</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">the_sum</span> <span class="o">=</span> <span class="n">the_sum</span> <span class="o">+</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">the_sum</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">list_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25
</pre></div>
</div>
</div>
</div>
<p>항목 더하기 문제를 재귀로 해결하려면 먼저 <code class="docutils literal notranslate"><span class="pre">the_sum</span></code>이 구해지는 과정을 역추적해야 한다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\text{the_sum} &amp; = 1 + (3 + (5 + (7 + 9))) \\
\text{the_sum} &amp; = 3 + (5 + (7 + 9)) \\
\text{the_sum} &amp; = 5 + (7 + 9) \\
\text{the_sum} &amp; = 7 + 9 \\
\text{the_sum} &amp; = 9
\end{align*}
\end{split}\]</div>
<p><code class="docutils literal notranslate"><span class="pre">the_sum</span></code>의 값이 업데이트되는 과정을 번호를 붙히면 다음을 얻는다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\text{the_sum}_5 &amp; = 1 + \text{the_sum}_4 \\
\text{the_sum}_4 &amp; = 3 + \text{the_sum}_3 \\
\text{the_sum}_3 &amp; = 5 + \text{the_sum}_2 \\
\text{the_sum}_2 &amp; = 7 + \text{the_sum}_1 \\
\text{the_sum}_1 &amp; = 9
\end{align*}
\end{split}\]</div>
<p><strong>리스트의 머리와 꼬리 활용</strong></p>
<p><span class="math notranslate nohighlight">\(\text{the_sum}_{i}\)</span>가 결정되는 방식은 모든 <span class="math notranslate nohighlight">\(i\)</span>에 대해 동일하게 아래 형식을 따른다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">)</span> <span class="o">=</span> <span class="n">num_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
<p>위 식을 리스트의 머리와 꼬리 개념으로 이해하면 재귀 알고리즘의 작동과정을 보다 쉽게 이해할 수 있다.
단, 큐(queue)에 사용되는 머리, 꼬리 개념과 다름에 주의해야 한다.</p>
<ul class="simple">
<li><p><strong>머리</strong>(head): 리스트의 0번 인덱스 값, 즉 <code class="docutils literal notranslate"><span class="pre">num_list[0]</span></code></p></li>
<li><p><strong>꼬리</strong>(tail): 0번 인덱스를 제외한 나머지, 즉 <code class="docutils literal notranslate"><span class="pre">num_list[1:]</span></code></p></li>
</ul>
<p>현재 리스트에 포함된 항목의 합을 구하려면
먼저 꼬리에 재귀를 적용한 다음 얻어진 결과에 머리를 더하면 된다.
이는 꼬리에 대한 재귀가 특정 값을 반환할 때까지 머리와의 합은 대기상태로 머물러야 함을 의미한다(아래 그림 참조).</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/sumlistIn.png" width="50%"></div>
</figure></section>
<section id="id5">
<h3><span class="section-number">12.2.2. </span>재귀 함수<a class="headerlink" href="#id5" title="Permalink to this headline">#</a></h3>
<p>앞서 설명한 재귀를 함수로 구현하면 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">num_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># 항목이 1개 일때</span>
        <span class="k">return</span> <span class="n">num_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>                   <span class="c1"># 항목이 2개 이상일 때</span>
        <span class="k">return</span> <span class="n">num_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">list_sum</span><span class="p">(</span><span class="n">num_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">list_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>25
</pre></div>
</div>
</div>
</div>
<p>함수가 실행될 때 자신을 호출하는 것을
<strong>재귀 호출</strong>(recursive call)이라 한다.
재귀 호출을 이용하여 구현된 알고리즘은 <strong>재귀 알고리즘</strong>(recursive algorithm),
재귀 알고리즘을 사용한 함수가 <strong>재귀 함수</strong>(recursive function)이다.</p>
</section>
</section>
<section id="id6">
<h2><span class="section-number">12.3. </span>5.3 재귀 알고리즘의 특징<a class="headerlink" href="#id6" title="Permalink to this headline">#</a></h2>
<p>재귀 알고리즘은 아래 세 가지 특징을 가져야 한다.</p>
<ol class="simple">
<li><p>재귀 호출이 반드시 발생해야 한다.</p></li>
<li><p><strong>종료조건</strong>(base case)이 존재해야 한다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list_sum()</span></code> 함수의 경우 <code class="docutils literal notranslate"><span class="pre">len(num_list)</span> <span class="pre">==</span> <span class="pre">1</span></code>이 종료조건을 다룬다.
종료조건이 없는 재귀 알고리즘은 실행이 종료되지 않을 수 있다.</p></li>
</ul>
</li>
<li><p>재귀 호출에 사용되는 입력값의 크기가 줄어들어야 하며, 결국에는 종료조건을 만족하는
상태에 다달해야 한다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list_sum()</span></code> 함수의 경우 <code class="docutils literal notranslate"><span class="pre">list_sum(num_list[1:])</span></code>에 사용된
리스트 <code class="docutils literal notranslate"><span class="pre">num_list[1:]</span></code>의 크기는 <code class="docutils literal notranslate"><span class="pre">num_list</span></code> 보다 1 작다.</p></li>
</ul>
</li>
</ol>
<p><strong>주의사항 1</strong>: 종료 조건이 없는 경우</p>
<p>종료조건이 없는 재귀 호출은 실행이 종료되지 않을 수 있다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>주의사항 2</strong>: 종료조건에 다달하는지 여부를 알 수 없는 경우</p>
<p>아래 <code class="docutils literal notranslate"><span class="pre">collatz(n)</span></code> 함수는 임의의 양의 정수 <code class="docutils literal notranslate"><span class="pre">n</span></code>에 대해 짝수면 2로 나누고,
홀수면 세 배 더하기 1을 반복적으로 실행하여 언젠가 1이 나오면 멈춘다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">collatz</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        <span class="n">collatz</span><span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        <span class="n">collatz</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">collatz</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7, 22, 11, 34, 17, 52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">collatz</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>101, 304, 152, 76, 38, 19, 58, 29, 88, 44, 22, 11, 34, 17, 52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">collatz</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1
</pre></div>
</div>
</div>
</div>
<p>아래 그림은 <span class="math notranslate nohighlight">\(1\)</span>부터 <span class="math notranslate nohighlight">\(10,000\)</span>까지의 입력값에 대해 <code class="docutils literal notranslate"><span class="pre">collatz(n)</span></code> 함수가 멈출때까지 몇 번의
재귀호출이 발생하는가를 보여준다.
그림에서 알 수 있듯이 입력값이 커질 수록 재귀 호출 횟수가 점점 커지는 경향이 있지만
재귀 호출 횟수가 입력크기에 비례하는 것은 절대 아니다.
실제로 지금까지 재귀 호출 횟수와 관련해서 어떤 규칙도 발견되지 않았다.
즉, 입력값이 주어지면 언제 종료되는지 아직 아무도 모른다.
이런 이유로 이 문제를 <strong>콜라츠 추측</strong>(Collatz Conjecture)이라 부른다.
<strong>정지문제</strong>(halting problem)와 관련해서 이해하면 도움되는 문제 유형 중에 하나이다.</p>
<figure>
<div align="center"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Collatz-stopping-time.svg/1280px-Collatz-stopping-time.svg.png" width="45%"></div>
</figure>
<p>&lt;그림 출처: <a class="reference external" href="https://en.wikipedia.org/wiki/Collatz_conjecture">위키백과: 콜라츠 추측</a>&gt;</p>
<p>아래 그림은 <span class="math notranslate nohighlight">\(1\)</span>부터 <span class="math notranslate nohighlight">\(10,000\)</span>까지의 입력값에 대해 <code class="docutils literal notranslate"><span class="pre">collatz(n)</span></code> 함수가 실행중에
인자로 사용하는 값들을 보여준다.
그림에서 보이지는 않지만 <span class="math notranslate nohighlight">\(n=9663\)</span>일 때 <span class="math notranslate nohighlight">\(2.7\times 10^7\)</span>도 인자로
사용된다.</p>
<figure>
<div align="center"><img src="https://upload.wikimedia.org/wikipedia/commons/9/95/CollatzConjectureGraphMaxValues.jpg" width="45%"></div>
</figure>
<p>&lt;그림 출처: <a class="reference external" href="https://en.wikipedia.org/wiki/Collatz_conjecture">위키백과: 콜라츠 추측</a>&gt;</p>
<section id="id7">
<h3><span class="section-number">12.3.1. </span>재귀 함수 예제<a class="headerlink" href="#id7" title="Permalink to this headline">#</a></h3>
<section id="factorial">
<h4><span class="section-number">12.3.1.1. </span>예제 1: 계승(factorial) 함수<a class="headerlink" href="#factorial" title="Permalink to this headline">#</a></h4>
<p>음이 아닌 정수 <span class="math notranslate nohighlight">\(n\)</span>이 주어졌을 때 <span class="math notranslate nohighlight">\(1\)</span>부터 <span class="math notranslate nohighlight">\(n\)</span>까지의 곱을 <span class="math notranslate nohighlight">\(n\)</span>의 계승이며, <span class="math notranslate nohighlight">\(n!\)</span>로 표기한다.
<span class="math notranslate nohighlight">\(n\)</span>의 계승을 계산하는 함수를 재귀를 이용하여 구현하면 다음과 같다.</p>
<ul class="simple">
<li><p>종료조건: <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">==</span> <span class="pre">0</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>        
</pre></div>
</div>
</div>
</div>
</section>
<section id="id8">
<h4><span class="section-number">12.3.1.2. </span>예제 2: 진법 변환<a class="headerlink" href="#id8" title="Permalink to this headline">#</a></h4>
<p>정수를 특정 진법으로 변환된 문자열을 반환하는 함수를 회귀를 이용하여 구현한다.
참고로 <a class="reference external" href="https://codingalzi.github.io/algopy/notebooks/algopy04_BasicDataStructures_1.html">4장 1부</a>에서는 스택을 활용하였다.
예를 들어, 769를 10진법으로 표현하려면 아래 그림에서처럼
10으로 나눈 몫과 나머지를 확인하는
작업을 반복한다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/toStr.png" width="45%"></div>
</figure><p>2진법으로 변환하는 과정도 동일하다.
아래 그림은 10을 2진법으로 변환하는 과정을 보여준다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/toStrBase2.png" width="45%"></div>
</figure><p>결론적으로 아래 세 가지 사항을 재귀 알고리즘 정의에 활용할 수 있다.</p>
<ol class="simple">
<li><p>종료조건: 사용되는 진법보다 작은 수는 그대로 문자열로 사용한다.
8진법인 경우엔 0부터 7까지의 수는 각각 <code class="docutils literal notranslate"><span class="pre">'0'</span></code>, <code class="docutils literal notranslate"><span class="pre">'1'</span></code>, …, <code class="docutils literal notranslate"><span class="pre">'7'</span></code> 등으로
변환한다.
16진법인 경우엔 0부터 15까지의 수를 각각
<code class="docutils literal notranslate"><span class="pre">'0'</span></code>, <code class="docutils literal notranslate"><span class="pre">'1'</span></code>, …, <code class="docutils literal notranslate"><span class="pre">'9'</span></code>, <code class="docutils literal notranslate"><span class="pre">'A'</span></code>, <code class="docutils literal notranslate"><span class="pre">'B'</span></code>, …, <code class="docutils literal notranslate"><span class="pre">'F'</span></code>로 변환한다.</p></li>
<li><p>재귀: 사용되는 진법보다 큰 수는 진법의 수로 나눈 다음에 몫에 대해 재귀를 활용하여
그 결과와 나머지를 사용한 문자열과 합친다.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">to_str()</span></code> 함수는 정수와 진법이 정해졌을 때 해당 진법으로 변환된 문자열을 반환하며,
앞서 설명한 재귀 알고리즘을 그대로 구현한다.
단, 2진법에서 16진법까지만 지원한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">to_str</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
    <span class="n">convert_string</span> <span class="o">=</span> <span class="s2">&quot;0123456789ABCDEF&quot;</span>   <span class="c1"># 종료조건에 사용될 자료</span>
    
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">base</span><span class="p">:</span>                          <span class="c1"># 종료조건</span>
        <span class="k">return</span> <span class="n">convert_string</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>                                 <span class="c1"># 재귀</span>
        <span class="k">return</span> <span class="n">to_str</span><span class="p">(</span><span class="n">n</span> <span class="o">//</span> <span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="n">convert_string</span><span class="p">[</span><span class="n">n</span> <span class="o">%</span> <span class="n">base</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">to_str</span><span class="p">(</span><span class="mi">46685</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1011011001011101
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">to_str</span><span class="p">(</span><span class="mi">46685</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>133135
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">to_str</span><span class="p">(</span><span class="mi">46685</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>B65D
</pre></div>
</div>
</div>
</div>
</section>
<section id="id9">
<h4><span class="section-number">12.3.1.3. </span>예제 3: 문자열 뒤집기<a class="headerlink" href="#id9" title="Permalink to this headline">#</a></h4>
<p>문자열을 받아 순서를 거꾸로 하는 문자열을 반환하는 회귀 함수는 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">s</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">+</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;l&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;follow&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>olleh
l
wollof
</pre></div>
</div>
</div>
</div>
</section>
<section id="id10">
<h4><span class="section-number">12.3.1.4. </span>예제 4: 회문 판별기<a class="headerlink" href="#id10" title="Permalink to this headline">#</a></h4>
<p>회문(palindrome) 판별기를 재귀 함수로 구현하면 다음과 같다.
단, 공백, 쉼표, 생략 기호, 마침표, 느낌표, 하이픈 등은 무시되며,
영어 알파벳의 대소문자도 구분하지 않는다.
즉 아래 문장들도 회문으로 인정받아야 한다.</p>
<ul class="simple">
<li><p>다시 합창합시다.</p></li>
<li><p>야, 이 달은 밝은 달이야.</p></li>
<li><p>Madam, I’m Adam.</p></li>
<li><p>A man, a plan, a canal - Panama!</p></li>
</ul>
<p>먼저 문자열이 순수히 알파벳만 포함하도록 변환한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">remove_white</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">whites</span> <span class="o">=</span> <span class="p">{</span><span class="n">s</span><span class="p">:</span><span class="kc">True</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="s2">&quot; ,.!?-&#39;&quot;</span><span class="p">}</span>
    <span class="n">clean_s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">whites</span><span class="p">:</span>
            <span class="n">clean_s</span> <span class="o">+=</span> <span class="n">char</span>
    <span class="k">return</span> <span class="n">clean_s</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">remove_white</span><span class="p">(</span><span class="s2">&quot;야, 이 달은 밝은 달이야.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;야이달은밝은달이야&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">remove_white</span><span class="p">(</span><span class="s2">&quot;Madam, I&#39;m Adam.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;madamimadam&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_pal</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">remove_white</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">is_pal</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_pal</span><span class="p">(</span><span class="s2">&quot;야, 이 달은 밝은 달이야.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_pal</span><span class="p">(</span><span class="s2">&quot;알고리즘 좋아!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_pal</span><span class="p">(</span><span class="s2">&quot;기러기&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_pal</span><span class="p">(</span><span class="s2">&quot;Madam, I&#39;m Adam.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_pal</span><span class="p">(</span><span class="s2">&quot;I am Sam.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">is_pal</span><span class="p">(</span><span class="s2">&quot;radar&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="call-stack">
<h2><span class="section-number">12.4. </span>5.4 콜 스택(Call Stack)<a class="headerlink" href="#call-stack" title="Permalink to this headline">#</a></h2>
<p>재귀 함수가 실행되면 재귀 호출이 발생할 때마다
함수 호출의 실행을 관리하는 <strong>프레임</strong>(frame)이
생성되며 스택(stack)으로 관리되며
이를 <strong>콜 스택</strong>(call stack)이라 부른다.
아래 코드를
<a class="reference external" href="https://pythontutor.com/visualize.html#code=convert_string%20%3D%20%220123456789ABCDEF%22%0Aremainder_list%20%3D%20%5B%5D%0A%0Adef%20to_str%28n,%20base%29%3A%0A%20%20%20%20if%20n%20%3C%20base%3A%0A%20%20%20%20%20%20%20%20return%20convert_string%5Bn%5D%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20quotient%20%3D%20n%20//%20base%0A%20%20%20%20%20%20%20%20remainder%20%3D%20n%20%25%20base%0A%20%20%20%20%20%20%20%20remainder_string%20%3D%20convert_string%5Bremainder%5D%0A%20%20%20%20%20%20%20%20remainder_list.append%28remainder_string%29%0A%20%20%20%20%20%20%20%20return%20to_str%28quotient,%20base%29%20%2B%20remainder_list.pop%28%29%0A%20%20%20%20%20%20%20%20%0Aprint%28to_str%2846685,%2016%29%29&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=3&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false">PythonTutor: 콜 스택</a>
에서 실행하면서 프레임 스택의 변화를 한 눈에 살펴볼 수 있다.</p>
<p><strong>참고</strong>: 아래 코드는 진법 변환 함수이며 메모리 상에서의 변화를 보다 명료하게
보여주기 위해 변수가 더 추가되었다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">convert_string</span> <span class="o">=</span> <span class="s2">&quot;0123456789ABCDEF&quot;</span>                           <span class="c1"># 진법 표현에 사용될 기호</span>
<span class="n">remainder_list</span> <span class="o">=</span> <span class="p">[]</span>                                           <span class="c1"># 나머지 기호 저장용 스택</span>

<span class="k">def</span> <span class="nf">to_str</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">base</span><span class="p">:</span>                                              <span class="c1"># 종료조건</span>
        <span class="k">return</span> <span class="n">convert_string</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">quotient</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="n">base</span>                                  <span class="c1"># 몫</span>
        <span class="n">remainder</span> <span class="o">=</span> <span class="n">n</span> <span class="o">%</span> <span class="n">base</span>                                  <span class="c1"># 나머지</span>
        <span class="n">remainder_string</span> <span class="o">=</span> <span class="n">convert_string</span><span class="p">[</span><span class="n">remainder</span><span class="p">]</span>
        <span class="n">remainder_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">remainder_string</span><span class="p">)</span>               <span class="c1"># 나머지 기호 저장</span>
        <span class="k">return</span> <span class="n">to_str</span><span class="p">(</span><span class="n">quotient</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="n">remainder_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># 몫에 대한 재귀 호출</span>
        
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">to_str</span><span class="p">(</span><span class="mi">46685</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>B65D
</pre></div>
</div>
</div>
</div>
<p>아래 그림은 <code class="docutils literal notranslate"><span class="pre">to_str(46685,</span> <span class="pre">16)</span></code>이 호출되어 콜 스택이 가장 높게 쌓였을 때를 보여준다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/call_stack_1.png" width="50%"></div>
</figure></section>
<section id="id11">
<h2><span class="section-number">12.5. </span>5.5 재귀 시각화<a class="headerlink" href="#id11" title="Permalink to this headline">#</a></h2>
<p>재귀를 이해하기 위해 재귀 알고리즘의 작동과정을 시각화햅보자.
시각화를 위해 <code class="docutils literal notranslate"><span class="pre">turtle</span></code> 모듈을 이용한다.
예를 들어, <code class="docutils literal notranslate"><span class="pre">draw_spiral()</span></code> 함수는 아래 그림과 같은 소용돌이를 그린다.</p>
<p><strong>주의사항</strong>: <code class="docutils literal notranslate"><span class="pre">turtle</span></code> 모듈을 사용하는 코드를 주피터 노트북 또는 구글 코랩에서 실행하려면
특별한 모듈을 설치해야 한다.
여기서는 대신에 개인 피씨 환경 또는 <a class="reference external" href="http://Repl.it">Repl.it</a> 사이트에서 코드를 실행할 것을 권장한다.
이런 이유로 이어지는 코드는 텍스트셀로 제공된다.</p>
<hr class="docutils" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>

<span class="k">def</span> <span class="nf">draw_spiral</span><span class="p">(</span><span class="n">my_turtle</span><span class="p">,</span> <span class="n">line_len</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">line_len</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">my_turtle</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">line_len</span><span class="p">)</span>
        <span class="n">my_turtle</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
        <span class="n">draw_spiral</span><span class="p">(</span><span class="n">my_turtle</span><span class="p">,</span> <span class="n">line_len</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>


<span class="n">my_turtle</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Turtle</span><span class="p">()</span>
<span class="n">my_win</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Screen</span><span class="p">()</span>
<span class="n">draw_spiral</span><span class="p">(</span><span class="n">my_turtle</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">my_win</span><span class="o">.</span><span class="n">exitonclick</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/draw_spiral.png" width="35%"></div>
</figure><section id="id12">
<h3><span class="section-number">12.5.1. </span>예제: 프랙탈 트리<a class="headerlink" href="#id12" title="Permalink to this headline">#</a></h3>
<p>아래 이미지처럼 아무리 확대하더라도 항상 동일한 구조를 보여주는 사물이 <strong>프랙탈</strong>(fractal)이다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/mandelbrot_fractal.png" width="70%"></div>
</figure>
<p><strong>참고</strong>: <a class="reference external" href="https://www.youtube.com/watch?v=8cgp2WNNKmQ&amp;ab_channel=MathsTown">YouTube: 만델브로트 프랙탈 줌</a></p>
<p>프랙탈의 구조는 재귀와 매우 밀접한 관계를 갖는다.
예를 들어, <code class="docutils literal notranslate"><span class="pre">tree()</span></code> 함수는 아래 모양의 프랙탈 트리를 그린다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/fractal_tree_2.png" width="35%"></div>
</figure><p><strong>참고</strong>: <a class="reference external" href="https://replit.com/&#64;codingrg/fractaltree">Repl.it: 프랙탈 트리</a>에서
실행할 수 있다.
<a class="reference external" href="https://runestone.academy/runestone/books/published/pythonds3/Recursion/pythondsintro-VisualizingRecursion.html">pythonds3: 5.7 Introduction: Visualizing Recursion</a>를 이용할 경우 <code class="docutils literal notranslate"><span class="pre">time.sleep()</span></code> 함수를 추가하여 천천히 실행되는 재귀 알고리즘의 작동을 살펴볼 수 있다.</p>
<hr class="docutils" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="c1"># import time                    # 주의: repl.it 사이트에서 오류 발생</span>

<span class="k">def</span> <span class="nf">tree</span><span class="p">(</span><span class="n">branch_len</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">branch_len</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>           <span class="c1"># 종료조건: branch_len &lt;= 5</span>
        <span class="n">t</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">branch_len</span><span class="p">)</span>    <span class="c1"># 전진</span>
        <span class="c1"># time.sleep(1)          </span>
        <span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>              <span class="c1"># 오른쪽 가지치기</span>
        <span class="n">tree</span><span class="p">(</span><span class="n">branch_len</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>               <span class="c1"># 왼쪽 가지치기</span>
        <span class="n">tree</span><span class="p">(</span><span class="n">branch_len</span> <span class="o">-</span> <span class="mi">15</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">right</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>              <span class="c1"># 한 단계 후진</span>
        <span class="n">t</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="n">branch_len</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Turtle</span><span class="p">()</span>
<span class="n">my_win</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Screen</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">left</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">backward</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
<span class="n">t</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;green&quot;</span><span class="p">)</span>
<span class="n">tree</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
<span class="n">my_win</span><span class="o">.</span><span class="n">exitonclick</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<p><code class="docutils literal notranslate"><span class="pre">tree()</span></code> 함수는 오른쪽 가지를 먼저 그리며, 이 과정을 최대한 멀리 진행한다.
가지치기를 할 때마다 가지의 길이를 15씩 줄이며,
그려야 할 가지의 길이가 5 이하일 때 가지치기를 멈춘다.
아래 이미지는 가지의 길이를 처음에 75로 시작해서 5번 오른쪽 가지치기를 수행한 후
더 이상의 가지치기가 불가능한 상태를 보여준다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/tree1.png" width="45%"></div>
</figure><p>더 이상 오른쪽 가지치기가 불가능하면 뒤로 한 단계 후진한 다음에 왼쪽 가지치기를 진행한다.
왼쪽 가지치기 이후 오른쪽 가지치가 가능하면 이를 먼저 수행한다.
아래 이미지는 그려야할 프랙탈 트리의 절반을 그린 상태를 보여준다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/tree2.png" width="45%"></div>
</figure></section>
<section id="id13">
<h3><span class="section-number">12.5.2. </span>꼬리와 재귀 일반화<a class="headerlink" href="#id13" title="Permalink to this headline">#</a></h3>
<p>리스트에 포함된 항목들의 합을 계산하는 <code class="docutils literal notranslate"><span class="pre">list_sum()</span></code>의 실행과정을 이해하기
위해 사용된 머리(head)와 꼬리(tail) 개념을 많은 재귀 알고리즘에 적용할 수 있다.</p>
<p>프랙탈 트리의 경우 가지 하나를 그린 다음 가지치기가 이루어지며
가지치기 이후에는 동일한 과정이 반복된다.
다만, 좌우 각 가지에서 완성되는 프랙탈 트리는
완성되어야 하는 전체 프랙탈 트리의 일부분을 담당한다.
그려진 하나의 가지를 머리, 그려져야 하는 좌우 두 개의 가지를 두 개의 꼬리로
이해할 수 있다.
즉, 머리를 그린 다음에 나머지는 각각의 꼬리에 동일한 과제를 떠넘기는 과정의
연속이 된다(아래 그림 참조).</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/fractal_tree_1.png" width="35%"></div>
</figure></section>
<section id="sierpinski-triangle">
<h3><span class="section-number">12.5.3. </span>예제: 시에르핀스키 삼각형(Sierpinski Triangle)<a class="headerlink" href="#sierpinski-triangle" title="Permalink to this headline">#</a></h3>
<p>정삼각형을 4등분한 후에 가장자리에 위치한 세 개의 삼각형을 대상으로 4등분하는 과정을 무한반복하여
얻어지는 삼각형이 <strong>시에르핀스키</strong>(Sierpinski) 삼각형이며 이 또한 프랙탈이다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/sierpinski_triangle1.png" width="50%"></div>
</figure><p>머리와 꼬리를 이용한 재귀 알고리즘의 이해는 시에르핀스키 삼각형을 이해할 때도 기본적으로 동일하게 적용된다.</p>
<ul class="simple">
<li><p>머리: 하나의 삼각형 그리기</p></li>
<li><p>꼬리: 4등분 후 각 꼭지점에서 동일한 과정 반복하기. 즉, 3 개의 꼬리 사용.</p></li>
</ul>
<p>시에르핀스키 삼각형 그리기를 재귀 알고리즘으로 구현하면 다음과 같다.</p>
<p><strong>참고</strong>: <a class="reference external" href="https://replit.com/&#64;codingrg/sierpinskitriangle">Repl.it: 시에르핀스키 삼각형</a>에서
실행할 수 있다.
<a class="reference external" href="https://runestone.academy/runestone/books/published/pythonds3/Recursion/pythondsSierpinskiTriangle.html">pythonds3: 5.8 Sierpinski Triangle</a>를 이용할 경우
아래 코드에 <code class="docutils literal notranslate"><span class="pre">time.sleep()</span></code> 함수를 추가하여 천천히 실행되는 재귀 알고리즘의 작동을 살펴볼 수 있다.</p>
<hr class="docutils" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="c1"># import time                    # 주의: repl.it 사이트에서 오류 발생</span>

<span class="c1"># 삼각형 그리기</span>
<span class="k">def</span> <span class="nf">draw_triangle</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">my_turtle</span><span class="p">):</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">fillcolor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">up</span><span class="p">()</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">down</span><span class="p">()</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">begin_fill</span><span class="p">()</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">my_turtle</span><span class="o">.</span><span class="n">end_fill</span><span class="p">()</span>

<span class="c1"># 삼각형 4등분하기에 필요한 좌표 계산</span>
<span class="k">def</span> <span class="nf">get_mid</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">((</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># 시에르핀스키 함수</span>
<span class="k">def</span> <span class="nf">sierpinski</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">my_turtle</span><span class="p">):</span>
    <span class="n">colormap</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="s2">&quot;violet&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">]</span>
    <span class="n">draw_triangle</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">colormap</span><span class="p">[</span><span class="n">degree</span><span class="p">],</span> <span class="n">my_turtle</span><span class="p">)</span>

    <span class="c1"># time.sleep(1)</span>

    <span class="c1"># 4등분하기</span>
    <span class="n">mid0</span> <span class="o">=</span> <span class="n">get_mid</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">mid1</span> <span class="o">=</span> <span class="n">get_mid</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">mid2</span> <span class="o">=</span> <span class="n">get_mid</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    
    <span class="c1"># 왼쪽 아래 -&gt; 위 -&gt; 오른쪽 아래 순으로 4등분하기를 재귀적으로 반복</span>
    <span class="k">if</span> <span class="n">degree</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">sierpinski</span><span class="p">([</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mid0</span><span class="p">,</span> <span class="n">mid2</span><span class="p">],</span> <span class="n">degree</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">my_turtle</span><span class="p">)</span>
        <span class="n">sierpinski</span><span class="p">([</span><span class="n">mid0</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">mid1</span><span class="p">],</span> <span class="n">degree</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">my_turtle</span><span class="p">)</span>
        <span class="n">sierpinski</span><span class="p">([</span><span class="n">mid2</span><span class="p">,</span> <span class="n">mid1</span><span class="p">,</span> <span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">degree</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">my_turtle</span><span class="p">)</span>

<span class="c1"># 거북이로 시에르핀스키 삼각형 그리기(degree=4)</span>
<span class="n">my_turtle</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Turtle</span><span class="p">()</span>
<span class="n">my_win</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">Screen</span><span class="p">()</span>
<span class="n">my_points</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">150</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span> <span class="p">[</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">150</span><span class="p">]]</span> <span class="c1"># 첫 삼각형 좌표</span>
<span class="n">sierpinski</span><span class="p">(</span><span class="n">my_points</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">my_turtle</span><span class="p">)</span>               <span class="c1"># 시에르핀스키 삼각형 그리기</span>
<span class="n">my_win</span><span class="o">.</span><span class="n">exitonclick</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
<p>사용된 재귀 알고리즘은 가능한한 먼저 왼쪽 아래의 작은 삼각형을 대상으로 4등분하기를 반복한다.
지정된 횟수(<code class="docutils literal notranslate"><span class="pre">degree</span></code>)만큼 반복하여 더 이상 4등분하기를 할 수 없을 때 위쪽(top)에 위치한
삼각형을 대상으로 4등분하기를 반복하며,
최종적으로 오른쪽 아래의 삼각형을 대상으로 삼는다.</p>
<figure>
<div align="center"><img src="https://raw.githubusercontent.com/codingalzi/algopy/master/notebooks/_images/stCallTree.png" width="50%"></div>
</figure></section>
</section>
<section id="id14">
<h2><span class="section-number">12.6. </span>프로그래밍 실습 문제<a class="headerlink" href="#id14" title="Permalink to this headline">#</a></h2>
<ol class="simple">
<li><p>프랙탈 트리에 사용된 알고리즘을 이용하여 손으로 직접 프랙탈 트리를 종이에 그려보아라.
예를 들어, <code class="docutils literal notranslate"><span class="pre">tree(75,</span> <span class="pre">거북이손)</span></code>을 실행한다고 가정한다.</p></li>
<li><p>프랙탈 트리 알고리즘을 아래 사항들에 맞추어 수정하라.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">branch_len</span></code>이 줄어들면 나뭇가지의 두께 또한 점점 얇아지도록 하라.</p></li>
<li><p>나뭇가지의 색상 또한 <code class="docutils literal notranslate"><span class="pre">branch_len</span></code>와 함께 달라져서 결국엔 나뭇잎 색깔이 되도록 하라.</p></li>
<li><p>좌우 가지치기의 각도를 15도에서 45도 사이에서 임의로 변할 수 있도록 하라.
단, 생성된 트리의 모양이 적절하게 보기 좋아야 한다.</p></li>
<li><p>나뭇가지의 길이가 일정하게 줄어드는 대신 가지치기 할 때마다 임의의 크기만큼 줄어들도록 하라.
단, 적절한 범위 내에서 줄어들어야 하며, 최종적으로 자연스럽게 보여야 한다.</p></li>
</ul>
</li>
<li><p>Find or invent an algorithm for drawing a fractal mountain. Hint: One
approach to this uses triangles again.</p></li>
<li><p>Write a recursive function to compute the Fibonacci sequence. How
does the performance of the recursive function compare to that of an
iterative version?</p></li>
<li><p>Using the turtle graphics module, write a recursive program to
display a Hilbert curve.</p></li>
<li><p>Using the turtle graphics module, write a recursive program to
display a Koch snowflake.</p></li>
</ol>
<p><strong>제너레이터 관련</strong></p>
<p><strong>문제</strong></p>
<p>중첩 리스트를 1차원 리스트로 변환하기. 재귀 활용과 제너레이터 활용 비교.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span> 
<span class="c1">#from collections import Iterable                            # &lt; py38</span>

<span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Yield items from any nested iterable; see Reference.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">sub_x</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">sub_x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span> 
<span class="c1">#from collections import Iterable                            # &lt; py38</span>

<span class="k">def</span> <span class="nf">flatten</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Yield items from any nested iterable; see Reference.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
            <span class="k">yield from</span> <span class="n">flatten</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">x</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simple</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
<span class="nb">list</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">simple</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">complicated</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">},</span> <span class="mi">7</span><span class="p">),</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">]</span>              <span class="c1"># numbers, strs, nested &amp; mixed</span>
<span class="nb">list</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">complicated</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4, 5, 6, 7, 8, &#39;9&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simple</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1, 2, 3], [4, 5, 6], [7], [8, 9]]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simple</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">simple</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;a&#39;, [1, 2, 3], [4, 5, 6], [7], [8, 9]]
</pre></div>
</div>
</div>
</div>
<p><strong>참고</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">while</span></code> 문 활용 함수</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">flatten_list</span><span class="p">(</span><span class="n">list1</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">inside</span> <span class="o">=</span> <span class="n">list1</span>
    <span class="k">while</span> <span class="n">inside</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">inside</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">inside</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span><span class="mi">3</span><span class="p">,[</span><span class="mi">4</span><span class="p">,[[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span><span class="mi">7</span><span class="p">],[</span><span class="mi">8</span><span class="p">]]],[</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">]]</span>
<span class="n">flatten_list</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="c1"># [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="ordered_lists.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">11. </span>기초 추상 자료형 구현 5부: 정렬 리스트</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="recursion_2.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">13. </span>재귀 2부: 하노이의 탑과 미로게임</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By 코딩알지<br/>
  
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>