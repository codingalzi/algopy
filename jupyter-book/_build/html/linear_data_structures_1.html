

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>4. 스택(Stack) &#8212; 문제해결 알고리즘</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'linear_data_structures_1';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. 큐(Queue)" href="linear_data_structures_2.html" />
    <link rel="prev" title="3. 클래스 기본 요소" href="python_basic_5.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    <p class="title logo__title">문제해결 알고리즘</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">파이썬 클래스와 추상 자료형</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="python_basic_3.html">1. 클래스, 인스턴스, 객체</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_basic_4.html">2. 상속</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_basic_5.html">3. 클래스 기본 요소</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">선형 자료 구조</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">4. 스택(Stack)</a></li>
<li class="toctree-l1"><a class="reference internal" href="linear_data_structures_2.html">5. 큐(Queue)</a></li>
<li class="toctree-l1"><a class="reference internal" href="linear_data_structures_3.html">6. 덱(Deque)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">알고리즘 시간 복잡도</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="time_complexity.html">7. 시간 복잡도</a></li>
<li class="toctree-l1"><a class="reference internal" href="orders.html">8. 차수</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_list_dict.html">9. 파이썬 모음 자료형 분석</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">트리, 힙, 맵</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="trees_heaps_maps_1.html">10. 트리(Tree)</a></li>
<li class="toctree-l1"><a class="reference internal" href="trees_heaps_maps_2.html">11. 힙(Heap)</a></li>
<li class="toctree-l1"><a class="reference internal" href="trees_heaps_maps_3.html">12. 맵(Map)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">재귀</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="recursive_functions.html">13. 재귀</a></li>
<li class="toctree-l1"><a class="reference internal" href="hanoi_tower.html">14. 하노이의 탑과 미로게임</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">탐색과 정렬</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="sort_search_1.html">15. 탐색과 분할 정복</a></li>
<li class="toctree-l1"><a class="reference internal" href="sort_search_2.html">16. 버블/선택/합병/퀵 정렬</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">동적계획법</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dynamic_programming_1.html">17. 최적화 문제와 동적계획법</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_programming_2.html">18. 플로이드-워셜 알고리즘</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">탐욕 기법</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="greedy_algorithm_1.html">19. 최소비용 신장트리</a></li>
<li class="toctree-l1"><a class="reference internal" href="greedy_algorithm_2.html">20. 다익스트라 알고리즘</a></li>
<li class="toctree-l1"><a class="reference internal" href="greedy_algorithm_3.html">21. 탐욕 기법 대 동적계획법</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">되추적 기법과 제네릭 프로그래밍</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="back_tracking.html">22. 되추적 기법</a></li>
<li class="toctree-l1"><a class="reference internal" href="generic_programming.html">23. 제네릭 프로그래밍</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">NP 이론</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="p_np.html">24. P-NP 문제</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/codingalzi/algopy/blob/master/jupyter-book/linear_data_structures_1.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/codingalzi/algopy" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/codingalzi/algopy/issues/new?title=Issue%20on%20page%20%2Flinear_data_structures_1.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/linear_data_structures_1.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>스택(Stack)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">4.1. 선형 자료구조</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">4.2. 스택의 정의</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">4.3. <code class="docutils literal notranslate"><span class="pre">Stack</span></code> 추상 자료형</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">4.4. 스택 자료구조 구현</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">4.5. 스택 실전 활용</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">4.5.1. 괄호 짝맞추기 문제</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">4.5.2. 괄호 짝맞추기 문제(일반화)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">4.5.3. 이진법 계산</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">4.5.4. 진법 변환</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">4.6. 중위/전위/중위 표기법</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">4.6.1. 중위 표기법</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">4.6.2. 전위/후기 표기법</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">4.7. 표기법 변환</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">4.7.1. 괄호를 사용한 중위 표기법 변환</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">4.7.2. 표기법 변환 알고리즘</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">4.8. 후위 표기법 표현식 계산</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">4.9. 연습 문제</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="stack">
<span id="sec-stacks"></span><h1><span class="section-number">4. </span>스택(Stack)<a class="headerlink" href="#stack" title="Permalink to this heading">#</a></h1>
<p><strong>소스코드</strong></p>
<p>아래 내용을
<a class="reference external" href="https://colab.research.google.com/github/codingalzi/algopy/blob/master/jupyter-book/stacks.ipynb">(구글 코랩) 스택</a>에서
직접 실행할 수 있다.</p>
<p><strong>주요 내용</strong></p>
<ul class="simple">
<li><p>스택 자료구조</p></li>
<li><p>스택 활용</p></li>
</ul>
<section id="id1">
<h2><span class="section-number">4.1. </span>선형 자료구조<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p><strong>선형 자료구조</strong><font size='2'>linear structures</font>는
여러 개의 값을 선형적으로 포함하는 모음 자료구조이다.
선형 자료구조는 두 개의 끝을 가지며 양 끝에 항목을 더하거나 삭제할 수 있는 기능을 제공한다.
항목의 추가/삭제 방식에 따라 선형 자료구조가 다르게 작동하며 일반적으로 아래 6종류의 선형 자료구조가 활용된다.</p>
<ul class="simple">
<li><p>스택<font size='2'>stack</font></p></li>
<li><p>큐<font size='2'>queue</font></p></li>
<li><p>덱<font size='2'>deque</font></p></li>
<li><p>연결 리스트<font size='2'>linked list</font></p></li>
<li><p>정렬 리스트<font size='2'>sorted list</font></p></li>
</ul>
<p>양 끝을 부르는 이름이 자료구조마다 다를 수 있으며 보통 처음/끝, 왼쪽/오른쪽, 전방/후방, 탑/바톰/베이스 등으로 불린다.
여기서는 먼저 스택을 소개한다.</p>
</section>
<section id="id2">
<h2><span class="section-number">4.2. </span>스택의 정의<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<p><strong>스택</strong><font size='2'>stack</font>은 여러 개의 값을 가지며 값들 사이의 순서가 중요한 선형 자료형이다.
항목의 추가 및 삭제는 보통 <strong>탑</strong><font size='2'>top</font>이라 불리는 한 쪽 끝에서만 허용된다.
반면에 다른 한 쪽 끝은 <strong>베이스</strong><font size='2'>base</font>라 한다.</p>
<ul class="simple">
<li><p>베이스: 가장 먼저 추가된 항목을 가리킨다.</p></li>
<li><p>탑: 가장 나중에 추가된 항목이며 동시에 가장 먼저 삭제될 대상을 가리킨다.</p></li>
</ul>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/primitive.png" width="60%"></div>
</figure><p><strong>후입선출</strong><font size='2'>last-in first-out</font>(LIFO)</p>
<p>아래 그림에서 설명된 것처럼 들어온 순서 역순으로 삭제되는 것을 의미한다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/simplereversal.png" width="75%"></div>
</figure><p><strong>활용 예제</strong>: 인터넷 브라우저의 ‘뒤로가기’<font size='2'>Back</font> 버튼</p>
<p>웹페이지가 변경될 때마다 순서를 기억해 둔 다음에
‘뒤로가기’ 버튼을 누르면 역순으로 이전 웹페이지를 보여준다.</p>
</section>
<section id="id3">
<h2><span class="section-number">4.3. </span><code class="docutils literal notranslate"><span class="pre">Stack</span></code> 추상 자료형<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h2>
<p>스택 추상 자료형을 구체적인 파이썬 자료구조로
구현하기 위해 구비해야 하는 기본 속성과 기능은 다음과 같다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Stack()</span></code>: 비어 있는 스택 생성. 생성작의 역할.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">push(item)</span></code>: 새로운 항목을 탑(top)으로 추가</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pop()</span></code>: 탑 항목 삭제. 삭제된 항목 반환.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">peek()</span></code>: 탑 항목 반환. 하지만 삭제하진 않음.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_empty()</span></code>: 스택이 비었는 여부 판단. 부울값 반환.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size()</span></code>:  항목 개수 반환.</p></li>
</ul>
<p>아래 테이블은 스택을 생성하과 활용하는 과정을 간단하게 소개한다.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>스택 연산</p></th>
<th class="head"><p>스택 항목</p></th>
<th class="head"><p>반환값</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">Stack()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s.is_empty()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s.push(4)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4]</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s.push('dog')</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog']</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s.peek()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog']</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'dog'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s.push(True)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog',</span> <span class="pre">True]</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s.size()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog',</span> <span class="pre">True]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s.is_empty()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog',</span> <span class="pre">True]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s.push(8.4)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog',</span> <span class="pre">True,</span> <span class="pre">8.4]</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s.pop()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog',</span> <span class="pre">True]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8.4</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s.pop()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog']</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s.size()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[4,</span> <span class="pre">'dog']</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="id4">
<h2><span class="section-number">4.4. </span>스택 자료구조 구현<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h2>
<p>스택 자료구조를 <code class="docutils literal notranslate"><span class="pre">Stack</span></code> 클래스로 구현하기 위해
리스트를 항목들의 저장 장치로 활용한다.
앞서 소개한 기능들은 모두 메서드로 정의한다.
스택의 탑 역할은 리스트의 오른쪽 끝(마지막 항목)이 수행하도록 한다.
이유는 알고리즘의 시간복잡도 성능이 좋은 리스트의 <code class="docutils literal notranslate"><span class="pre">pop()</span></code>와 <code class="docutils literal notranslate"><span class="pre">append()</span></code>를 활용하기 위해서이다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Stack</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;리스트를 활용한 스택 구현&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;새로운 스택 생성&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;스택 표기법: &lt;[1, 2, 3]&gt; 등등&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
        
    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;비었는지 여부 확인&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;새 항목 추가&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;항목 제거&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">peek</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;탑 항목 반환&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;항목 개수 반환&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>앞서 살펴본 그림을 코드로 구현하면 다음과 같다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">is_empty</span><span class="p">())</span>
<span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">peek</span><span class="p">())</span>
<span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">is_empty</span><span class="p">())</span>
<span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mf">8.4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
dog
3
False
8.4
True
2
</pre></div>
</div>
</div>
</div>
<p>스택의 탑을 리스트의 첫째 항목으로 정하면 <code class="docutils literal notranslate"><span class="pre">pop(0)</span></code>와 <code class="docutils literal notranslate"><span class="pre">insert(0,</span> <span class="pre">item)</span></code>을 사용해야 하는 데 그러면 시간복잡도가 커진다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Stack_left</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">==</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">peek</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>기능면에서는 이전과 완전히 동일하다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">Stack_left</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;true&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>true
</pre></div>
</div>
</div>
</div>
<p>하지만 이전에 보았듯이  <code class="docutils literal notranslate"><span class="pre">pop()</span></code>과 <code class="docutils literal notranslate"><span class="pre">append(item)</span></code>의 시간복잡도는 <span class="math notranslate nohighlight">\(O(1)\)</span>인 반면에
<code class="docutils literal notranslate"><span class="pre">pop(0)</span></code>와 <code class="docutils literal notranslate"><span class="pre">insert(0,</span> <span class="pre">item)</span></code>의 시간복잡도는 <span class="math notranslate nohighlight">\(O(n)\)</span>이라는 점에서 많이 다르다.</p>
<p><strong>예제</strong></p>
<p>스택 연산을 아래와 같이 실행한 결과 탑에 위치한 항목을 확인해보자.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;z&#39;
</pre></div>
</div>
</div>
</div>
<p><strong>예제</strong></p>
<p>스택에 항목이 없으면 탑 항목을 확인하려 할 때 오류가 발생한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">)</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">m</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
    <span class="n">m</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">peel</span><span class="p">()</span>
<span class="go">IndexError                                Traceback (most recent call last)</span>
<span class="go">c:\Users\gslee\Documents\GitHub\algopy\jupyter-book\stacks.ipynb 셀 29 in &lt;cell line: 8&gt;()</span>
<span class="go">      5 while not m.is_empty():</span>
<span class="go">      6     m.pop()</span>
<span class="go">----&gt; 8 m.peek()</span>

<span class="go">c:\Users\gslee\Documents\GitHub\algopy\jupyter-book\stacks.ipynb 셀 29 in Stack.peek(self)</span>
<span class="go">     17 def peek(self):</span>
<span class="go">---&gt; 18     return self.items[0]</span>

<span class="go">IndexError: list index out of range</span>
</pre></div>
</div>
</section>
<section id="id5">
<h2><span class="section-number">4.5. </span>스택 실전 활용<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h2>
<section id="id6">
<h3><span class="section-number">4.5.1. </span>괄호 짝맞추기 문제<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h3>
<p>아래 식에서처럼 함수나 또는 연산 실행을 위해 사용되는 괄호는 짝이 맞아야 한다.
즉, 여는 괄호 하나와 닫는 괄호 하나가 짝이 맞아야 한다.</p>
<div class="math notranslate nohighlight">
\[(5 + 6) * (7 + 8) / (4 + 3)\]</div>
<p>위 표현식에서 괄호만 고려하면 다음 모양이 되어 모든 괄호의 짝이 잘 맞음을 쉽게 확인할 수 있다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>()()()
</pre></div>
</div>
<p>그런데 괄호가 중첩되어 사용되면 보다 복잡해진다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(()()()())

(((())))

(()((())()))
</pre></div>
</div>
<p>예를 들어, 아래 예제는 짝이 맞지 않는 괄호가 존재한다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>((((((())

()))

(()()(()
</pre></div>
</div>
<p>그런데 표현식 또는 코드에 사용된 모든 괄호들의 짝이 맞는가를 확인하는 일은 매우 중요하다.
파이썬의 경우 괄호가 맞지 않으면 실행 전에 바로 구문 오류(<code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code>)를 발생시킨다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">7</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">4</span> <span class="o">+</span> <span class="mi">3</span>

<span class="go">  Input In [7]</span>
<span class="go">    (5 + 6) * (7 + 8) / (4 + 3</span>
<span class="go">                              ^</span>
<span class="go">SyntaxError: unexpected EOF while parsing</span>
</pre></div>
</div>
<p>아래 코드는 스택을 이용하여 괄호로 이루어진 문자열이 짝이 맞는 괄호들로 이루어졌는지 여부를 판단하는
함수를 구현한다.
스택 활용법은 다음과 같다.
괄호로 이루어진 문자열이 주어졌을 때 왼편부터 시작해서 여는 괄호와 닫는 괄호를
만달 때마다 아잭 작업을 반복한다.</p>
<ul class="simple">
<li><p>여는 괄호: 스택에 추가</p></li>
<li><p>닫는 괄호: 스택의 탑 항목 삭제</p></li>
</ul>
<p>위 작업을 반복하다 보면 아래 세 가지 경우가 발생한다.</p>
<ul class="simple">
<li><p>문자열을 다 확인하기 전에 스택이 비워지는 경우: 닫는 괄호가 너무 많음</p></li>
<li><p>끝까지 확인했을 때 스택이 비워지지 않은 경우: 여는 괄호가 너무 많음</p></li>
<li><p>그렇지 않으면 모든 괄호의 짝이 맞음.</p></li>
</ul>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/simpleparcheck.png" width="40%"></div>
</figure><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">par_checker</span><span class="p">(</span><span class="n">symbol_string</span><span class="p">):</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    
    <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbol_string</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">symbol</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">s</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">par_checker</span><span class="p">(</span><span class="s2">&quot;((()))&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">par_checker</span><span class="p">(</span><span class="s2">&quot;((()()))&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">par_checker</span><span class="p">(</span><span class="s2">&quot;(()&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">par_checker</span><span class="p">(</span><span class="s2">&quot;)(&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
True
False
False
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3><span class="section-number">4.5.2. </span>괄호 짝맞추기 문제(일반화)<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h3>
<p>소, 중, 대 세 종류의 괄호를 대상으로 짝맞추기 문제를 해결하는 알고리즘을 구현한다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(</span></code>, <code class="docutils literal notranslate"><span class="pre">)</span></code>: 튜플, 표현식 등</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{</span></code>, <code class="docutils literal notranslate"><span class="pre">}</span></code>: 사전, 집합 등</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">]</span></code>: 리스트 등</p></li>
</ul>
<p>아래 예제는 모두 괄호들의 짝이 맞는다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{ { ( [ ] [ ] ) } ( ) }

[ [ { { ( ( ) ) } } ] ]

[ ] [ ] [ ] ( ) { }
</pre></div>
</div>
<p>반면 아래의 경우는 서로 다른 종류의 짝이 사용되고 있다.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>( [ ) )

( ( ( ) ] ) )

[ { ( ) ]
</pre></div>
</div>
<p>이전 코드를 조금 수정하면 일반화된 짝맞추기 문제를 해결할 수 있다.
다만, 닫는 괄호를 처리할 때 동일한 종류인지 여부를 추가로 확인해야 한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">balance_checker</span><span class="p">(</span><span class="n">symbol_string</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbol_string</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="s2">&quot;([{&quot;</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">symbol</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">s</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">matches</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">(),</span> <span class="n">symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="n">sym_left</span><span class="p">,</span> <span class="n">sym_right</span><span class="p">):</span>
    <span class="n">all_lefts</span> <span class="o">=</span> <span class="s2">&quot;([{&quot;</span>
    <span class="n">all_rights</span> <span class="o">=</span> <span class="s2">&quot;)]}&quot;</span>
    <span class="k">return</span> <span class="n">all_lefts</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">sym_left</span><span class="p">)</span> <span class="o">==</span> <span class="n">all_rights</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">sym_right</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">balance_checker</span><span class="p">(</span><span class="s1">&#39;{({([][])}())}&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">balance_checker</span><span class="p">(</span><span class="s1">&#39;[{()]&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
False
</pre></div>
</div>
</div>
</div>
</section>
<section id="id8">
<h3><span class="section-number">4.5.3. </span>이진법 계산<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h3>
<p>십진법 정수 <span class="math notranslate nohighlight">\(233_{10}\)</span>를 이진법으로 표기하면 <span class="math notranslate nohighlight">\(11101001_{2}\)</span>이 된다.
실제로 두 수가 가리키는 수를 다음과 같으며 동일한 값을 나타낸다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
233_{10} &amp;= 2\times10^{2} + 3\times10^{1} + 3\times10^{0}\\
&amp; \\
11101001_{2} &amp;= 1\times2^{7} + 1\times2^{6} + 1\times2^{5} + 0\times2^{4} + 1\times2^{3} + 0\times2^{2} + 0\times2^{1} + 1\times2^{0}
\end{align*}
\end{split}\]</div>
<p>십진법으로 표기된 정수의 이진법 표기를 찾는 알고리즘은 아래 그림과 같다.</p>
<ul class="simple">
<li><p>2로 나눈 후 나머지를 스택에 추가</p></li>
<li><p>2로 나눈 몫을 대상으로 위 과정 반복</p></li>
<li><p>스택에 쌓인 값들을 거꾸로 읽기. 즉, <code class="docutils literal notranslate"><span class="pre">pop()</span></code>을 연속적으로 활용함.</p></li>
</ul>
<figure>
<div align="center"><img src="https://runestone.academy/runestone/books/published/pythonds3/_images/dectobin.png" width="60%"></div>
</figure><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">divide_by_2</span><span class="p">(</span><span class="n">decimal_num</span><span class="p">):</span>
    <span class="n">rem_stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">decimal_num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">rem</span> <span class="o">=</span> <span class="n">decimal_num</span> <span class="o">%</span> <span class="mi">2</span>
        <span class="n">rem_stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">rem</span><span class="p">)</span>
        <span class="n">decimal_num</span> <span class="o">=</span> <span class="n">decimal_num</span> <span class="o">//</span> <span class="mi">2</span>

    <span class="n">bin_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">rem_stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="n">bin_string</span> <span class="o">=</span> <span class="n">bin_string</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">rem_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">bin_string</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">divide_by_2</span><span class="p">(</span><span class="mi">42</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">divide_by_2</span><span class="p">(</span><span class="mi">31</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>101010
11111
</pre></div>
</div>
</div>
</div>
<p><strong>참고</strong></p>
<p>파이썬의 <code class="docutils literal notranslate"><span class="pre">bin()</span></code> 함수가 이진법으로 변환해준다.
이진수는 <code class="docutils literal notranslate"><span class="pre">0b</span></code>로 시작한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="p">(</span><span class="mi">233</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;0b11101001&#39;
</pre></div>
</div>
</div>
</div>
<p>십진법으로 변환은 자동으로 진행된다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mb">0b11101001</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>233
</pre></div>
</div>
</div>
</div>
</section>
<section id="id9">
<h3><span class="section-number">4.5.4. </span>진법 변환<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h3>
<p>십진법으로 표기된 정수를 이진법 뿐만 아니라 8진법, 16진법 등으로 자유자재로
변환시키는 함수를 구현해보자.
예를 들어 정수 233을 8진법으로는 <code class="docutils literal notranslate"><span class="pre">351</span></code> 또는 16진법으로는 <code class="docutils literal notranslate"><span class="pre">E9</span></code>이며,
이유는 다음과 같다.</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
233 &amp;= 3\times8^{2} + 5\times8^{1} + 1\times8^{0} \\
&amp;= 14\times16^{1} + 9\times16^{0}
\end{align*}
\end{split}\]</div>
<p>다음 <code class="docutils literal notranslate"><span class="pre">base_converter()</span></code> 함수는 정수 뿐만 아니라 사용될 진법을
결정하는 밑(base)도 함께  인자로 받는다.
밑은 2에서 16 사이의 정수로 가정한다.</p>
<p>알고리즘은 <code class="docutils literal notranslate"><span class="pre">divide_by_2()</span></code> 함수와 거의 동일하다.
다만, 10진법부터 16진법까지는 0부터 9까지의 숫자 이외의 문자를 추가로 사용해야 한다.
여기서는 A, B, C, D, E, F를 10에서 15를 나타내는 기호로 사용한다.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">push()</span></code> 활용: 이전과 동일</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pop()</span></code> 활용: 10부터 15까지의 나머지에 대해 A부터 F 까지 대신 사용항여 문자열 생성.
이를 위해 <code class="docutils literal notranslate"><span class="pre">digits</span></code> 변수에 할당된 문자열의 인덱싱 활용.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">base_converter</span><span class="p">(</span><span class="n">decimal_num</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
    
    <span class="n">digits</span> <span class="o">=</span> <span class="s2">&quot;0123456789ABCDEF&quot;</span>
    
    <span class="n">rem_stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>

    <span class="k">while</span> <span class="n">decimal_num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">rem</span> <span class="o">=</span> <span class="n">decimal_num</span> <span class="o">%</span> <span class="n">base</span>
        <span class="n">rem_stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">rem</span><span class="p">)</span>
        <span class="n">decimal_num</span> <span class="o">=</span> <span class="n">decimal_num</span> <span class="o">//</span> <span class="n">base</span>

    <span class="n">new_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">rem_stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="n">new_string</span> <span class="o">=</span> <span class="n">new_string</span> <span class="o">+</span> <span class="n">digits</span><span class="p">[</span><span class="n">rem_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span>

    <span class="k">return</span> <span class="n">new_string</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">base_converter</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">base_converter</span><span class="p">(</span><span class="mi">623</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">base_converter</span><span class="p">(</span><span class="mi">828375</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>11001
1157
CA3D7
</pre></div>
</div>
</div>
</div>
<p><strong>참고</strong></p>
<p>파이썬의 <code class="docutils literal notranslate"><span class="pre">oct()</span></code> 함수와 <code class="docutils literal notranslate"><span class="pre">hex()</span></code> 함수가 각각 8진법과 16진법으로 변환해준다.
8진수는 <code class="docutils literal notranslate"><span class="pre">0o</span></code>로, 16진수는 <code class="docutils literal notranslate"><span class="pre">0x</span></code>로 시작한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">oct</span><span class="p">(</span><span class="mi">233</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;0o351&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">hex</span><span class="p">(</span><span class="mi">233</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;0xe9&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id10">
<h2><span class="section-number">4.6. </span>중위/전위/중위 표기법<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h2>
<p>이항 연산자를 이용한 표현식을 작성하는 세 종류의 표기법을 살펴본다.
또한 표기법 변환 알고리즘과 변환된 표현식의 계산 알고리즘을 스택 자료구조를 이용하여 구현한다.</p>
<section id="id11">
<h3><span class="section-number">4.6.1. </span>중위 표기법<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h3>
<p>아래 두 수식에 사용되는 덧셈 연산자(<code class="docutils literal notranslate"><span class="pre">+</span></code>)와
곱셈 연산자(<code class="docutils literal notranslate"><span class="pre">*</span></code>)는 더해지거나 곱해지는 두
피연산자(operand), 즉 두 인자의 사이에 위치한다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">6</span>
</pre></div>
</div>
<p>이렇게 이항 연산자를
두 피연산자 사이에 위치시켜 표현식을 작성하는 방법을
<strong>중위 표기법</strong>(infix notation)이라 한다.
중위 표기법으로 작성된 표현식은 간단하게 <strong>중위 표현식</strong>이라 부른다.</p>
<p>중위 표현식을 해석할 때 연산자들의 <strong>우선순위</strong>를 잘 고려해야 한다.
예를 들어 <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">+</span> <span class="pre">3</span> <span class="pre">*</span> <span class="pre">6</span></code>는 <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">+</span> <span class="pre">(3</span> <span class="pre">*</span> <span class="pre">6)</span></code>로 해석되어 최종적으로 20으로 계산된다.
이유는 덧셈 보다 곱셈의 우선순위가 높기 때문이다.
반면에 <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">+</span> <span class="pre">3)</span> <span class="pre">*</span> <span class="pre">6</span></code> 처럼 연산자의 우선순위와 다르게 연산을 강요하려면
괄호를 사용한다. 그러면 괄호에 의해 <code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">*</span> <span class="pre">6</span></code>, 즉 30으로 계산된다.</p>
<p>또한 <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">-</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">7</span></code>와 <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">/</span> <span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code> 처럼 우선순위가 동일한 연산자가 연속적으로 사용되었을 경우엔
왼쪽에 위치한 연산자부터 계산한다.
즉, <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">-</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">7</span></code>는 <code class="docutils literal notranslate"><span class="pre">(4</span> <span class="pre">-</span> <span class="pre">x)</span> <span class="pre">+</span> <span class="pre">7</span></code>로, <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">/</span> <span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code>는 <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">/</span> <span class="pre">x)</span> <span class="pre">*</span> <span class="pre">y</span></code> 로 계산된다.
<code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">-</span> <span class="pre">(x</span> <span class="pre">+</span> <span class="pre">7)</span></code> 또는 <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">/</span> <span class="pre">(x</span> <span class="pre">*</span> <span class="pre">y)</span></code> 는 다른 값을 가리킴에 주의해야 한다.</p>
</section>
<section id="id12">
<h3><span class="section-number">4.6.2. </span>전위/후기 표기법<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h3>
<p>이처럼 중위 표기법을 사용하는 표현식은 의도된 계산을 명확히 하기 위해 괄호를 사용해야 한다.
그런데 <strong>전위 표기법</strong>(prefix notation)
또는 <strong>후기 표기법</strong>(postfix notation)을
사용하면 괄호를 전혀 사용하지 않으면서 원하고자 하는 값을 유일한 방식으로 나타낼 수 있다.</p>
<p>예를 들어 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code>를 전위 표기법과 후기 표기법으로 표현하면 다음과 같다.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>중위 표기법</p></th>
<th class="head text-center"><p>전위 표기법</p></th>
<th class="head text-center"><p>후위 표기법</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">x</span> <span class="pre">y</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">+</span></code></p></td>
</tr>
</tbody>
</table>
<p>전위 표기법을 사용하면 모든 연산자가 모든 피연산자(연산자의 인자)의 왼쪽에 위치하며,
피연산자는 연산자 오른쪽에 차례대로 위치한다.
후위 표기법을 사용하면 모든 연산자가 모든 피연산자(연산자의 인자)의 오른쪽에 위치하며,
피연산자는 연산자 왼쪽에 차례대로 위치한다.</p>
<p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">z</span></code> 처럼 여러 개의 연산자가 사용되는 경우엔
피연산자에 대해 동일한 규칙을 적용한다.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>중위 표기법</p></th>
<th class="head text-center"><p>전위 표기법</p></th>
<th class="head text-center"><p>후위 표기법</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">z</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span> <span class="pre">z</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">z</span> <span class="pre">*</span> <span class="pre">+</span></code></p></td>
</tr>
</tbody>
</table>
<p>아래 표는 <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">+</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">z</span></code>의 전위와 하위 표현식을 보여준다.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>중위 표기법</p></th>
<th class="head text-center"><p>전위 표기법</p></th>
<th class="head text-center"><p>후위 표기법</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">+</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">z</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">+</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">z</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span> <span class="pre">*</span></code></p></td>
</tr>
</tbody>
</table>
<p>이처럼 전위 또는 후위 표기법을 사용하면 괄호가 없어도 모든 표현식이 유일한 값을 가리킨다.
아래 표는 보다 많은 예제를 보여준다.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>중위 표기법</p></th>
<th class="head text-center"><p>전위 표기법</p></th>
<th class="head text-center"><p>후위 표기법</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">z</span> <span class="pre">+</span> <span class="pre">v</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span> <span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span> <span class="pre">z</span> <span class="pre">v</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">z</span> <span class="pre">*</span> <span class="pre">+</span> <span class="pre">v</span> <span class="pre">+</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">+</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">(z</span> <span class="pre">+</span> <span class="pre">v)</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">+</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span> <span class="pre">v</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span> <span class="pre">v</span> <span class="pre">+</span> <span class="pre">*</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span> <span class="pre">*</span> <span class="pre">v</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">*</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">z</span> <span class="pre">v</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">z</span> <span class="pre">v</span> <span class="pre">*</span> <span class="pre">+</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span> <span class="pre">+</span> <span class="pre">v</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">+</span> <span class="pre">+</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">z</span> <span class="pre">v</span></code></p></td>
<td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span> <span class="pre">+</span> <span class="pre">v</span> <span class="pre">+</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id13">
<h2><span class="section-number">4.7. </span>표기법 변환<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h2>
<section id="id14">
<h3><span class="section-number">4.7.1. </span>괄호를 사용한 중위 표기법 변환<a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">+</span> <span class="pre">B</span> <span class="pre">*</span> <span class="pre">C</span></code> 표현식의 의미는 <code class="docutils literal notranslate"><span class="pre">(A</span> <span class="pre">+</span> <span class="pre">(B</span> <span class="pre">*</span> <span class="pre">C))</span></code> 와 동일하다.
그리고 <code class="docutils literal notranslate"><span class="pre">(A</span> <span class="pre">+</span> <span class="pre">(B</span> <span class="pre">*</span> <span class="pre">C))</span></code>처럼 사용되는 모든 연산자를 대상으로 괄호가 사용된
표현식을 전위 또는 후위 표기법으로 변환하는 일은 어렵지 않다.
이유는 여는 괄호는 표현식의 시작을 의미하고,
바로 옆에는 첫째 피연산자가, 그 다음엔 (중위) 연산자가,
그 다음엔 둘째 피연산자가 위치하며,
마지막의 닫는 괄호는 표현식의 끝을 의미하기 때문이다.</p>
<p>결국 <code class="docutils literal notranslate"><span class="pre">(B</span> <span class="pre">*</span> <span class="pre">C)</span></code> 와 같은 표현식을 <code class="docutils literal notranslate"><span class="pre">*</span> <span class="pre">B</span> <span class="pre">C</span></code> 또는 <code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">C</span> <span class="pre">*</span></code> 로 변환하는
과정을 반복하기만 하면 아무리 복잡한 표현식이라도
간단하게 전위 또는 후위 표기법으로 변환할 수 있다.</p>
<p><strong>예제</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">(A</span> <span class="pre">+</span> <span class="pre">B)</span> <span class="pre">*</span> <span class="pre">C</span> <span class="pre">-</span> <span class="pre">(D</span> <span class="pre">-</span> <span class="pre">E)</span> <span class="pre">*</span> <span class="pre">(F</span> <span class="pre">+</span> <span class="pre">G)</span></code> 를 중위/후위 표기법으로 표현하는 과정은 다음과 같다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/ns/books/published/pythonds3/_images/complexmove.png" width="80%"></div>
</figure></section>
<section id="id15">
<h3><span class="section-number">4.7.2. </span>표기법 변환 알고리즘<a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h3>
<p>중위 표현식을 후위 표현식으로 변환하는 알고리즘을 구현해보자.</p>
<p>중위 표현식이 앞서 설명한 것처럼 모든 이항 연산에 대해 괄호를 철저하게 사용하였다면 아주 쉽게 변환할 수 있다.
하지만 일반적으로는 반드시 필요하지 않은 괄호는 생략하고 연산자의
우선순위에 따라 계산되도록 한다.
예를 들어, <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">+</span> <span class="pre">B</span> <span class="pre">*</span> <span class="pre">C</span></code> 는 <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">+</span> <span class="pre">(B</span> <span class="pre">*</span> <span class="pre">C)</span></code>과 동일하기에 후위 표기법으로 <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">B</span> <span class="pre">C</span> <span class="pre">*</span> <span class="pre">+</span></code> 로 변환된다.</p>
<p>중위 표현식을 후위 표현식으로 변환할 때 피연산자의 순서는 그대로 유지되지만
연산자의 순서는 연산자의 우선순위와 괄호에 의한 연산자 실행 순서에 의해 달라진다는
성질을 이용하여 표기법 변환 알고리즘을 작성한다.</p>
<ul class="simple">
<li><p>중위 표기법 표현식을 왼쪽에서부터 차례대로 사용된 피연산자와 연산자를 확인한다.</p></li>
<li><p>피연산자가 확인되면 그대로 후위 표기법 표현식에 추가한다.</p></li>
<li><p>연산자의 경우엔 별도로 준비된 스택(stack)에 추가한다.
단, 해당 연산자의 우선순위와 괄호의 사용 여부에 따라 스택을 먼저
관리한 다음에 추가한다.</p></li>
</ul>
<p>연산자들을 스택으로 관리하는 이유는 먼저 스택에 추가된 연산자보다 낮은 우선순위의 연산자를
만나는 순간 스택에 포함된 보다 높거나 같은 우선순위의 연산자와 관련된 계산을 먼저 실행해야 하기에
해당 연산자들을 스택에서 제거해서 바로 후위 표기법의 표현식에 추가할 수 있기 때문이다.
또한 <code class="docutils literal notranslate"><span class="pre">(A</span> <span class="pre">+</span> <span class="pre">B)</span> <span class="pre">*</span> <span class="pre">C</span></code>의 경우처럼 괄호가 포함되면 여는 괄호도 스택에 추가한다.
반면에 닫는 괄호를 만나는 순간 스택에 있는 여는 괄호를 만날 때까지 스택을 비우면서
후위 표기법 표현식을 완성해 나간다.</p>
<p>이런 점들을 고려하면서 알고리즘을 묘사하면 다음과 같다.
먼저, 중위 표현식에 사용된 모든 연산자, 피연산, 괄호 등은 모두 공백(space)로
구분된 문자열로 주어진다고 가정한다.</p>
<ol class="arabic">
<li><p>연산자와 여는 괄호를 쌓아 둘 스택 <code class="docutils literal notranslate"><span class="pre">op_stack</span></code>을 준비해 놓는다.
또한 후위 표현식에 사용될 기호를 차례대로 저장할 빈 리스트 <code class="docutils literal notranslate"><span class="pre">postfix_list</span></code>도 준비한다.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">op_stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
<span class="n">postfix_list</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</li>
<li><p>문자열로 입력된 중위 표현식을 <code class="docutils literal notranslate"><span class="pre">split()</span></code> 메서드를 이용하여 리스트로 변환한다.</p></li>
<li><p>리스트의 항목(토큰, token)의 종류에 따라 아래 과정을 처리한다.</p>
<ul class="simple">
<li><p>피연산자인 경우: <code class="docutils literal notranslate"><span class="pre">postfix_list</span></code>에 추가한다.</p></li>
<li><p>여는 괄호인 경우: <code class="docutils literal notranslate"><span class="pre">op_stack</span></code>에 추가한다.</p></li>
<li><p>닫는 괄호인 경우: <code class="docutils literal notranslate"><span class="pre">op_stack</span></code>에서 여는 괄호를 만날 때까지 탑을 빼서 <code class="docutils literal notranslate"><span class="pre">postfix_list</span></code>에 추가한다.</p></li>
<li><p>연산자(<code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>)인 경우: <code class="docutils literal notranslate"><span class="pre">op_stack</span></code>에 추가한다.
단, 먼저 <code class="docutils literal notranslate"><span class="pre">op_stack</span></code>으로부터 우선순위가 높거나 같은 연산자를 모두 탑에서 빼서 <code class="docutils literal notranslate"><span class="pre">postfix_list</span></code>에 추가해야 한다.</p></li>
</ul>
</li>
<li><p>입력된 중위 표현식에 사용된 모든 기호를 처리했다면 <code class="docutils literal notranslate"><span class="pre">op_stack</span></code>에 남아있는 모든 연산자를 빼서
<code class="docutils literal notranslate"><span class="pre">postfix_list</span></code>에 추가한다.</p></li>
</ol>
<p>아래 그림은 <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">*</span> <span class="pre">B</span> <span class="pre">+</span> <span class="pre">C</span> <span class="pre">*</span> <span class="pre">D</span></code>를 후위 표기법으로 변환하는 과정을 잘 보여준다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/ns/books/published/pythonds3/_images/intopost.png" width="80%"></div>
</figure><p>위 알고리즘을 파이썬 코드로 구현하려면 먼저 스택 자료형이 필요하며,
여기서는 이전에 구현한 <code class="docutils literal notranslate"><span class="pre">Stack</span></code> 클래스를 이용한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Stack</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;리스트를 활용한 스택 구현&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;새로운 스택 생성&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;스택 표기법: &lt;[1, 2, 3]&gt; 등등&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
        
    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;비었는지 여부 확인&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;새 항목 추가&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;항목 제거&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">peek</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;탑 항목 반환&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;항목 개수 반환&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>후위 표현식으로 변환 알고리즘에서 사용될 연산자들의 우선순위는 <code class="docutils literal notranslate"><span class="pre">prec</span></code> 이라는 사전으로 관리한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prec</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">prec</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">prec</span><span class="p">[</span><span class="s2">&quot;/&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">prec</span><span class="p">[</span><span class="s2">&quot;+&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">prec</span><span class="p">[</span><span class="s2">&quot;-&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">prec</span><span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prec</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;*&#39;: 3, &#39;/&#39;: 3, &#39;+&#39;: 2, &#39;-&#39;: 2, &#39;(&#39;: 1}
</pre></div>
</div>
</div>
</div>
<p>연는 괄호에도 우선순위를 부여한다. 하지만 다른 연산자들에 비해 가장 낮다.
이유는 닫는 괄호가 아닌 다른 연산자에 의해 <code class="docutils literal notranslate"><span class="pre">op_stack</span></code>에서 제거되지 않도록
하기 위해서이다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">infix_to_postfix</span><span class="p">(</span><span class="n">infix_expr</span><span class="p">):</span>
    <span class="n">op_stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="n">postfix_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">token_list</span> <span class="o">=</span> <span class="n">infix_expr</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">token_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;()*/+-&#39;</span><span class="p">:</span>
            <span class="n">postfix_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span>
            <span class="n">op_stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s2">&quot;)&quot;</span><span class="p">:</span>
            <span class="n">top_token</span> <span class="o">=</span> <span class="n">op_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">while</span> <span class="n">top_token</span> <span class="o">!=</span> <span class="s2">&quot;(&quot;</span><span class="p">:</span>
                <span class="n">postfix_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">top_token</span><span class="p">)</span>
                <span class="n">top_token</span> <span class="o">=</span> <span class="n">op_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">while</span> <span class="p">(</span><span class="ow">not</span> <span class="n">op_stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">())</span> <span class="ow">and</span> <span class="p">(</span><span class="n">prec</span><span class="p">[</span><span class="n">op_stack</span><span class="o">.</span><span class="n">peek</span><span class="p">()]</span> <span class="o">&gt;=</span> <span class="n">prec</span><span class="p">[</span><span class="n">token</span><span class="p">]):</span>
                <span class="n">postfix_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">op_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
            <span class="n">op_stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="n">op_stack</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
        <span class="n">postfix_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">op_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>

    <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">postfix_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>예제</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infix_to_postfix</span><span class="p">(</span><span class="s2">&quot;A * B + C * D&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;A B * C D * +&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infix_to_postfix</span><span class="p">(</span><span class="s2">&quot;( A + B ) * C - ( D - E ) * ( F + G )&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;A B + C * D E - F G + * -&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infix_to_postfix</span><span class="p">(</span><span class="s2">&quot;( A + B ) * ( C + D )&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;A B + C D + *&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infix_to_postfix</span><span class="p">(</span><span class="s2">&quot;( A + B ) * C&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;A B + C *&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">infix_to_postfix</span><span class="p">(</span><span class="s2">&quot;A + B * C&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;A B C * +&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id16">
<h2><span class="section-number">4.8. </span>후위 표기법 표현식 계산<a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h2>
<p>후위 표현식을 실제로 계산하는 알고리즘을 스택을 이용하여 구현한다.
후위 표현식에서는 연산자보다 피연산자, 즉 연산자의 인자들이 먼저 확인되기에
피연산자들을 스택에 쌓아두고 적절한 연산자가 확인될 때까지 기다리도록 해야 한다.
정리하면 다음과 같다.</p>
<p>후위 표현식을 계산하기 위해 왼쪽에서 오른쪽으로 표현식에 사용된 기호를 확인한다.
확인된 기호의 종류에 따라 다음 과정을 반복 실행한다.</p>
<ul class="simple">
<li><p>수: 스택에 추가한다.</p></li>
<li><p>연산자: 스택에서 <code class="docutils literal notranslate"><span class="pre">pop()</span></code>을 두 번 실행해서 얻어진 피연산자를 이용해서 연산 실행. 이후 결과를 다시 스택에 쌓는다.</p></li>
</ul>
<p>표현식의 모든 기호를 확인하면 스택에 하나의 값만 남게 되고 해당 값이 바로 주어진 표현식이 나타내는 값이 된다.</p>
<p><strong>예제</strong></p>
<p>후위 표현식 <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">5</span> <span class="pre">6</span> <span class="pre">*</span> <span class="pre">+</span></code>을 설명된 알고리즘에 따라 계산하는 과정은 아래 그림과 같다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/ns/books/published/pythonds3/_images/evalpostfix1.png" width="55%"></div>
</figure><p><strong>예제</strong></p>
<p>후위 표현식 <code class="docutils literal notranslate"><span class="pre">7</span> <span class="pre">8</span> <span class="pre">+</span> <span class="pre">3</span> <span class="pre">2</span> <span class="pre">+</span> <span class="pre">/</span></code>을 설명된 알고리즘에 따라 계산하는 과정은 아래 그림과 같다.</p>
<figure>
<div align="center"><img src="https://runestone.academy/ns/books/published/pythonds3/_images/evalpostfix2.png" width="60%"></div>
</figure><p><strong>주의사항</strong></p>
<p>나눗셈과 뺄셈처럼 교환법칙이 성립하지 않은 이항 연산자처럼 첫째, 둘째 인자의 위치가 중요한 경우에는 스택을 활용할 때 조심해야 한다.
이유는 표현식을 왼쪽에서부터 확인할 때 첫째 인자가 먼저 스택에 쌓이기에 <code class="docutils literal notranslate"><span class="pre">pop()</span></code> 연산을 실행하면 첫째 인자가 나중에 나온다.
따라서 <code class="docutils literal notranslate"><span class="pre">7</span> <span class="pre">8</span> <span class="pre">+</span></code>의 결과인 15가 <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">2</span> <span class="pre">+</span></code>의 결과인 5 보다 먼저 스택에 쌓이게 되고,
최종적으로 <code class="docutils literal notranslate"><span class="pre">15</span> <span class="pre">5</span> <span class="pre">/</span></code>를 계산하기 위해 <code class="docutils literal notranslate"><span class="pre">pop()</span></code>을 실행하면 5와 15 순서로 먼저 스택에서 나온다.
이때 그냥 바로 나눗셈을 계산하면 <code class="docutils literal notranslate"><span class="pre">15/5</span></code>가 아닌 <code class="docutils literal notranslate"><span class="pre">5/15</span></code>가 계산되어 잘못된 결과를 얻게 된다.</p>
<p>이점을 고려하면서 후위 표현식 계산 알고리즘을 정리하면 다음과 같다.
표현식에 사용된 연산 기호는 <code class="docutils literal notranslate"><span class="pre">*,</span> <span class="pre">/,</span> <span class="pre">+,</span> <span class="pre">-</span></code>로 제한한다.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">operand_stack</span></code> 라는 비어있는 스택을 준비한다.</p></li>
<li><p>후위 표현식 문자열을 <code class="docutils literal notranslate"><span class="pre">split()</span></code> 메서드를 이용하여 리스트로 변환한다.</p></li>
<li><p>리스트를 왼쪽에서부터 하나씩 차례대로 확인하면서 확인된 기호의 종류에 다라 아래 과정을 반복한다.</p>
<ul class="simple">
<li><p>피연산자인 경우: 수(number)로 변환한 다음 <code class="docutils literal notranslate"><span class="pre">operand_stack</span></code>에 추가한다.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*,</span> <span class="pre">/,</span> <span class="pre">+,</span> <span class="pre">-</span></code> 중 하나인 경우: <code class="docutils literal notranslate"><span class="pre">operand_stack</span></code>을 두 번 <code class="docutils literal notranslate"><span class="pre">pop()</span></code>한다.
첫번째로 얻어진 값은 둘째 인자로,
두번째로 얻어진 값은 첫째 인자로 지정한다.
두 인자를 이용하여 연산을 실행한 다음
계산된 값을 다시 <code class="docutils literal notranslate"><span class="pre">operand_stack</span></code>에 추가한다.</p></li>
</ul>
</li>
<li><p>리스트의 모든 항목을 확인한 다음에 <code class="docutils literal notranslate"><span class="pre">operand_stack</span></code>에 납아있는 유일한 값을 주어진 표현식을 계산한 값으로 사용한다.</p></li>
</ol>
<p>위 알고리즘을 파이썬으로 구현한 코드는 다음과 같다.
<code class="docutils literal notranslate"><span class="pre">do_math()</span></code> 함수는 연산자와 두 개의 피연산자가 주어졌을 때 해당 연산을 실행한다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">do_math</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">op1</span><span class="p">,</span> <span class="n">op2</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">op1</span> <span class="o">*</span> <span class="n">op2</span>
    <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">op1</span> <span class="o">/</span> <span class="n">op2</span>
    <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="s2">&quot;+&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">op1</span> <span class="o">+</span> <span class="n">op2</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">op1</span> <span class="o">-</span> <span class="n">op2</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">postfix_eval</span><span class="p">(</span><span class="n">postfix_expr</span><span class="p">):</span>
    <span class="n">operand_stack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
    <span class="n">token_list</span> <span class="o">=</span> <span class="n">postfix_expr</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">operand_stack</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">token_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;*/+-&#39;</span><span class="p">:</span>
            <span class="n">operand_stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">operand2</span> <span class="o">=</span> <span class="n">operand_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">operand1</span> <span class="o">=</span> <span class="n">operand_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">do_math</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">operand1</span><span class="p">,</span> <span class="n">operand2</span><span class="p">)</span>
            <span class="n">operand_stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">operand_stack</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">operand_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">postfix_eval</span><span class="p">(</span><span class="s2">&quot;7 8 + 3 2 + /&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;[]&gt;
&lt;[7]&gt;
&lt;[7, 8]&gt;
&lt;[15]&gt;
&lt;[15, 3]&gt;
&lt;[15, 3, 2]&gt;
&lt;[15, 5]&gt;
&lt;[3.0]&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.0
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">infix_to_postfix()</span></code> 함수의 표기법 변환이 제대로 작동함을 다시 한 번 다음과 같이 확인할 수 있다.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">postfix_eval</span><span class="p">(</span><span class="n">infix_to_postfix</span><span class="p">(</span><span class="s2">&quot;( 7 + 8 ) / ( 3 + 2 )&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;[]&gt;
&lt;[7]&gt;
&lt;[7, 8]&gt;
&lt;[15]&gt;
&lt;[15, 3]&gt;
&lt;[15, 3, 2]&gt;
&lt;[15, 5]&gt;
&lt;[3.0]&gt;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.0
</pre></div>
</div>
</div>
</div>
</section>
<section id="id17">
<h2><span class="section-number">4.9. </span>연습 문제<a class="headerlink" href="#id17" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://colab.research.google.com/github/codingalzi/algopy/blob/master/excs/exc-stacks.ipynb">(실습) 스택</a></p></li>
<li><p><a class="reference external" href="https://colab.research.google.com/github/codingalzi/algopy/blob/master/excs/exc-infix_prefix_postfix.ipynb">(실습) 중위, 전위, 후위 표기법</a></p></li>
</ol>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="python_basic_5.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">3. </span>클래스 기본 요소</p>
      </div>
    </a>
    <a class="right-next"
       href="linear_data_structures_2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">5. </span>큐(Queue)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">4.1. 선형 자료구조</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">4.2. 스택의 정의</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">4.3. <code class="docutils literal notranslate"><span class="pre">Stack</span></code> 추상 자료형</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">4.4. 스택 자료구조 구현</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">4.5. 스택 실전 활용</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">4.5.1. 괄호 짝맞추기 문제</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">4.5.2. 괄호 짝맞추기 문제(일반화)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">4.5.3. 이진법 계산</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">4.5.4. 진법 변환</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">4.6. 중위/전위/중위 표기법</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">4.6.1. 중위 표기법</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">4.6.2. 전위/후기 표기법</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">4.7. 표기법 변환</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">4.7.1. 괄호를 사용한 중위 표기법 변환</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">4.7.2. 표기법 변환 알고리즘</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">4.8. 후위 표기법 표현식 계산</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">4.9. 연습 문제</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 코딩알지
</p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>